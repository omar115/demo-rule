<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rule Community Services &mdash; Rakizo Documentation  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="#" class="icon icon-home"> Rakizo Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Testing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Rakizo Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
      <li>Rule Community Services</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rule-community-services">
<h1>Rule Community Services<a class="headerlink" href="#rule-community-services" title="Permalink to this headline">ÔÉÅ</a></h1>
<p><strong>Rule Community</strong> is a Community including multiple microservices to serve Rakizo
platform. The microservices are treated as cloud function. Rakizo is using GCP platform.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Testing</a></li>
</ul>
</div>
<p class="plantuml">
<img src="_images/plantuml-f876a8b44f4a7dff77752b9a3a8f9ff76df2b73d.png" alt="&#64;startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml
' uncomment the following line and comment the first to use locally
' !include C4_Container.puml

title Rule Component Diagram

AddContainerTag(&quot;class&quot;, $legendText=&quot;class&quot;)
AddContainerTag(&quot;database&quot;, $legendText=&quot;database&quot;, $bgColor=&quot;#cadetblue&quot;)

Container(aggregates, &quot;aggregates&quot;, $descr=&quot;An Aggregate is an encapsulation of entities and value objects (domain objects). An Aggregate generates an Event and adds it to its event list.&quot;, $tags=&quot;class&quot;)
Container(api, &quot;api&quot;, $descr=&quot;API is used to create endpoints for users to access the features of a service. API calls the service to perform operations.&quot;, $tags=&quot;class&quot;, $link=&quot;sequence.puml&quot;)
Container(event_handlers, &quot;event_handlers&quot;, $tags=&quot;class&quot;)
Container(events, &quot;events&quot;, $tags=&quot;class&quot;)
Container(repositories, &quot;repositories&quot;, $descr=&quot;A repository is similar to saving business data or object into a database. A Repository saves an Aggregate using a Model.&quot;, $tags=&quot;class&quot;)
Container(services, &quot;services&quot;, $descr=&quot;A service creates an Aggregate and saves it using a Repository.&quot;, $tags=&quot;class&quot;)
Container(publisher, &quot;publisher&quot;, $tags=&quot;class&quot;)
ContainerDb(db, &quot;Database&quot;, &quot;Firestore&quot;, $descr=&quot;Saves the Aggregates.&quot;, $tags=&quot;database&quot;)
ContainerDb(db1, &quot;Database&quot;, &quot;Firestore&quot;, $descr=&quot;Saves emitted Events.&quot;, $tags=&quot;database&quot;)

Rel(api, services, &quot;Calls&quot;)
Rel(event_handlers, services, &quot;Calls&quot;)
Rel(services, aggregates, &quot;Creates&quot;)
Rel(services, repositories, &quot;Calls&quot;)
Rel(aggregates, events, &quot;Generates&quot;)
Rel(repositories, db, &quot;Persists&quot;)
Rel_R(repositories, db1, &quot;Persists&quot;)
BiRel_R(aggregates, repositories, &quot;Uses&quot;)
Rel_D(db1, publisher, &quot;Triggers&quot;)

SHOW_LEGEND()
&#64;enduml
"/>
</p>
<p class="plantuml">
<img src="_images/plantuml-e09f811c35690e084809d00f8ad62d6f052aed19.png" alt="&#64;startuml
title Create rule

#BDB5D5:Client sends a POST request to /rules/;
-&gt; calls;
#ADD1B2:RuleService;
floating note : Response: {integration}, 201
:create;
#ADD1B2:RuleRepository;
:save;
floating note:RuleCreated
split
    #ADD1B2:Rule;
split again
    #ADD1B2:Events/Event;
end split
#F2D2BD:Firestore;
-&gt; triggers;
#A7C7E7:Publisher;
legend right
    Legend
    | method |
    |&lt;#ADD1B2&gt; class |
    |&lt;#F2D2BD&gt; database |
    |&lt;#BDB5D5&gt; process |
    |&lt;#A7C7E7&gt; publisher |
endlegend
&#64;enduml
"/>
</p>
<p class="plantuml">
<img src="_images/plantuml-65005e475d8283a960ea4fc087f275fadd9b0957.png" alt="&#64;startuml
title Update a Rule

#BDB5D5:Client sends a PATCH request to:\n /rules/&lt;rule_id&gt;;
-&gt; calls;
#ADD1B2:RuleService;
if (update) then ({response: rule_object}, 200\n yes)
   #ADD1B2:RuleRepository;
    :save;
    floating note:One of these events will be emitted\nbased on the update:\n\nRuleNameUpdated\nRuleInfoUpdated
    split
        #ADD1B2:Rule;
    split again
        #ADD1B2:Events/Event;
    end split
    #F2D2BD:Firestore;
    -&gt; triggers;
    #A7C7E7:Publisher;
    kill
else ({'message': 'Rule object not found'}, 404\n no)
    #EB937F:If there is an error, then raise the exception:\nAggregateNotFoundException;
    kill
endif

legend right
    Legend
    | method |
    |&lt;#ADD1B2&gt; class |
    |&lt;#F2D2BD&gt; database |
    |&lt;#BDB5D5&gt; process |
    |&lt;#A7C7E7&gt; publisher |
endlegend
&#64;enduml
"/>
</p>
<p># Rule Service #</p>
<p>Rule service is responsible for creating, updating and deleting rules of the Rakizo platform. When user
with roles Platform Admin, Account Admin, App Builder Admin, App Builder tries to create rule using name,
then <cite>RuleCreated</cite> event is generated and Rule aggregate data is saved to Firestore in <cite>RuleModel</cite> along
with the generated events.</p>
<p>## Overview ##</p>
<p>There are four main parts of this service which are as follows:</p>
<ol class="arabic simple">
<li><p>Source code</p></li>
<li><p>Deployments</p></li>
<li><p>Tests</p></li>
<li><p>Documents</p></li>
</ol>
<p><strong>Service Structure</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rule
 <span class="p">|</span>---- rule
 <span class="p">|</span>      <span class="p">|</span>---- aggregates.py
 <span class="p">|</span>      <span class="p">|</span>---- api.py
 <span class="p">|</span>      <span class="p">|</span>---- containers.py
 <span class="p">|</span>      <span class="p">|</span>---- events.py
 <span class="p">|</span>      <span class="p">|</span>---- exceptions.py
 <span class="p">|</span>      <span class="p">|</span>---- repositories.py
 <span class="p">|</span>      <span class="p">|</span>---- schemas.py
 <span class="p">|</span>      <span class="p">|</span>---- services.py
 <span class="p">|</span>---- deployment
 <span class="p">|</span>      <span class="p">|</span>---- deployment.yaml
 <span class="p">|</span>---- tests
 <span class="p">|</span>      <span class="p">|</span>---- rule
 <span class="p">|</span>      <span class="p">|</span>       <span class="p">|</span>---- aggregate_test.py
 <span class="p">|</span>      <span class="p">|</span>       <span class="p">|</span>---- api_test.py
 <span class="p">|</span>      <span class="p">|</span>       <span class="p">|</span>---- schema_test.py
 <span class="p">|</span>      <span class="p">|</span>       <span class="p">|</span>---- service_tests.py
 <span class="p">|</span>---- build.yaml
 <span class="p">|</span>---- release.yaml
 <span class="p">|</span>---- README.md
 <span class="p">|</span>---- requirements.txt
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Udplatforms Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: master
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      <dd><a href="../0.0.4/index.html">0.0.4</a></dd>
      <dd><a href="../0.0.5/index.html">0.0.5</a></dd>
      <dd><a href="../0.0.6/index.html">0.0.6</a></dd>
      <dd><a href="../0.0.7/index.html">0.0.7</a></dd>
      <dd><a href="../0.0.8/index.html">0.0.8</a></dd>
      <dd><a href="../1.0.0/index.html">1.0.0</a></dd>
      <dd><a href="../1.0.1/index.html">1.0.1</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="index.html">master</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>